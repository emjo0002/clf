---
import Singleview_udstillinger from "../../../components/Singleview_udstillinger.astro";
import Footer from "../../../components/Footer.astro";

export async function getStaticPaths() {
  const response = await fetch("https://fcbvmlrpntifmglyhaps.supabase.co/rest/v1/test_products", {
    method: "GET",
    headers: {
      apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZjYnZtbHJwbnRpZm1nbHloYXBzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTAzNTk3MjgsImV4cCI6MjAyNTkzNTcyOH0.xrxVZKs3mAZMWAP5IsKkDABTXackwex73ZIHtyLHB44",
    },
  });
  const data = await response.json();

  const newData = data.map((slug) => {
    return { params: { slug: slug.slug }, props: { data: slug } };
  });

  //console.log(newData);
  return newData;
}

const { slug } = Astro.params;
const { data } = Astro.props;
console.log(data);
---

<html lang="da">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{data.name}</title>
  </head>

  <body> </body>
</html>
